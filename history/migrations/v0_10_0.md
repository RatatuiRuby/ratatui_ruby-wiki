<!--
  SPDX-FileCopyrightText: 2026 Kerrick Long <me@kerricklong.com>
  SPDX-License-Identifier: CC-BY-SA-4.0
-->

# Migrating to v0.10.0

v0.10.0 standardizes the library's architecture. It completes the transition to explicit namespaces and enforces strict API usage.

## 1. Explicit Namespaces

We removed the `lib/ratatui_ruby/schema/` directory. Classes now reside exclusively in their architectural namespaces.

**Why?**
Explicit namespaces match the Rust architecture 1:1.

**The Fix:**
Update explicit class references to their new locations.

| Old (Removed) | New (Canonical) |
| :--- | :--- |
| `RatatuiRuby::Paragraph` | `RatatuiRuby::Widgets::Paragraph` |
| `RatatuiRuby::Block` | `RatatuiRuby::Widgets::Block` |
| `RatatuiRuby::Table` | `RatatuiRuby::Widgets::Table` |
| `RatatuiRuby::List` | `RatatuiRuby::Widgets::List` |
| `RatatuiRuby::Style` | `RatatuiRuby::Style::Style` |
| `RatatuiRuby::Layout` | `RatatuiRuby::Layout::Layout` |
| `RatatuiRuby::Constraint` | `RatatuiRuby::Layout::Constraint` |

**Note on the DSL:**
If you strictly use the `tui` DSL (e.g., `tui.paragraph`), you do not need to change anything for this. The DSL handles the namespaces for you.

## 2. Media Key Renaming

We renamed media keys to prevent collisions with standard keys.

**The Change:**
Generic keys like `play`, `stop`, and `pause` are now `media_play`, `media_stop`, and `media_pause`.

**Why?**
The key name `pause` is ambiguous. It could refer to the system "Pause/Break" key or a media control. The `media_` prefix clarifies intent.

**The Fix:**
Update your event matching logic to use the new names or the semantic predicates.

```ruby
# Incorrect Key Codes (v0.10.0+)
if event.key.code == "play"

# Correct Key Codes
if event.key.code == "media_play" # For the triangular music button
if event.key.code == "media_pause" # For the two-bars music button
if event.key.code == "pause" # for the system pause/break key often found near Scroll Lock

# Semantic Predicates
if event.key.play?
if event.key.pause? # => matches both "pause" and "media_pause"
```

## 3. Cell Modifiers are Symbols

`Buffer::Cell#modifiers` now returns an Array of Symbols.

**The Change:**
Previously, this method returned Strings. It now returns Symbols (e.g., `[:bold, :italic]`).

**Why?**
This ensures consistency with `Style` inputs and `Event` modifiers, which already use Symbols.

**The Fix:**
Update string comparisons to symbol comparisons.

```ruby
# Incorrect (v0.10.0+)
cell.modifiers.include?("bold")

# Correct
cell.modifiers.include?(:bold)
```

## 4. NullIO Moved

`RatatuiRuby::NullIO` has been removed.

**The Fix:**
Use `RatatuiRuby::OutputGuard::NullIO` if you rely on this internal class.

## 5. Strict Drawing

`RatatuiRuby.draw` now enforces strict argument validation.

**The Change:**
You must provide *either* a generic tree value *or* a block. Providing both or neither now raises an `ArgumentError`.

```ruby
# Correct
RatatuiRuby.draw(tree)
RatatuiRuby.draw { |f| ... }

# Incorrect (raises ArgumentError)
RatatuiRuby.draw
RatatuiRuby.draw(tree) { |f| ... }
```

**Why?**
This removes ambiguity and prevents undefined behavior.

## Summary

v0.10.0 aligns the Ruby library with the underlying Rust architecture. Review your direct class instantiations, key handling logic, and modifier checks to ensure compatibility.
